import{_ as E,i as y,u as R,r as d,o as n,c as f,a as m,t as h,b,n as a,d as o,e as r}from"./index-CZPsGGkh.js";const v={name:"FormBuilderFile",mixins:[y],props:{name:{default:"",type:String},value:{default:"",type:[String,Object]},caption:{default:null,type:String},capture:{default:void 0,type:String},sendNull:{default:!1,type:Boolean},accept:{default:void 0,type:String}},data(){return{file:null,inputUid:null,url:null}},computed:{imageSource(){return this.isValidURL(this.inputData)?this.inputData:this.inputData instanceof File?this.createObjectURL():this.inputData===null?this.url:null},previewMode(){let e="";return this.inputData===null?e=this.getSourceExtension(this.url):e=this.getSourceExtension(this.inputData),e}},watch:{value(e){this.inputData=e,this.isFile(e)&&(this.file=e),e===null&&this.sendNull&&(this.url=null,this.file=e)},inputData(e){this.isValidURL(e)&&this.getSourceExtension(e)==="photo"&&(this.url=e)},file(e){e===null?this.inputData=this.url:this.inputData=e}},created(){this.inputUid=this.getUid()},methods:{downloadFile(){window.open(this.value,"_blank")},onClearInputFile(){},getSourceExtension(e){return this.isValidURL(e)?this.getFileExtension(e):this.isFile(e)?this.getFileExtension(e.name):!1},getFileExtension(e){if(!e||typeof e!="string")return!1;const l=/\.(jpeg|jpg|gif|png)$/,t=/\.(mp3|ogg)$/,p=/\.(doc|docx)$/,s=/\.(xls|xlsx)$/,i=/\.(pdf)$/;return e.match(l)!=null?"photo":e.match(t)!=null?"audio":e.match(i)!=null?"pdf":e.match(p)!=null?"office/word":e.match(s)!=null?"office/excel":!1},isFile(e){return typeof File<"u"&&e instanceof File&&typeof e.type=="string"},isValidURL(e){if(!e||typeof e!="string"||this.isFile(e))return!1;const l=document.createElement("a");return l.href=e,l.host!==""},createObjectURL(){return window.URL.createObjectURL(this.inputData)},getUid(){return R()}}},C={class:"outsideLabel"},F=["for"],k={key:0,class:"caption text-grey-8"};function D(e,l,t,p,s,i){const g=d("q-file"),A=d("q-img"),u=d("q-icon");return n(),f("div",{class:a(["form-builder-file",e.customClass])},[m("div",C,h(e.placeholder?e.label:null),1),b(g,{id:s.inputUid,modelValue:s.file,"onUpdate:modelValue":[l[0]||(l[0]=c=>s.file=c),l[1]||(l[1]=c=>e.change(c))],name:t.name,label:e.placeholder?null:e.label,"stack-label":!!e.placeholder,placeholder:e.placeholder,disable:e.disable,filled:e.filled,capture:t.capture,accept:t.accept,readonly:e.readonly,loading:e.loading,clearable:"","model-value":s.file,rules:e.rules,"lazy-rules":e.lazyRules,class:a(e.customClass),"input-class":e.customClass,onClear:i.onClearInputFile,onClick:e.onClick},null,8,["id","modelValue","name","label","stack-label","placeholder","disable","filled","capture","accept","readonly","loading","model-value","rules","lazy-rules","class","input-class","onClear","onClick"]),m("label",{for:s.inputUid,class:"cursor-pointer",onClick:l[2]||(l[2]=c=>i.downloadFile())},[i.previewMode==="photo"?(n(),o(A,{key:0,src:i.imageSource,"placeholder-src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAG1BMVEXMzMyWlpaqqqq3t7fFxcW+vr6xsbGjo6OcnJyLKnDGAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAElEQVRoge3SMW+DMBiE4YsxJqMJtHOTITPeOsLQnaodGImEUMZEkZhRUqn92f0MaTubtfeMh/QGHANEREREREREREREtIJJ0xbH299kp8l8FaGtLdTQ19HjofxZlJ0m1+eBKZcikd9PWtXC5DoDotRO04B9YOvFIXmXLy2jEbiqE6Df7DTleA5socLqvEFVxtJyrpZFWz/pHM2CVte0lS8g2eDe6prOyqPglhzROL+Xye4tmT4WvRcQ2/m81p+/rdguOi8Hc5L/8Qk4vhZzy08DduGt9eVQyP2qoTM1zi0/uf4hvBWf5c77e69Gf798y08L7j0RERERERERERH9P99ZpSVRivB/rgAAAABJRU5ErkJggg==",class:a(["cursor-pointer",e.customClass])},null,8,["src","class"])):r("",!0),i.previewMode==="audio"?(n(),o(u,{key:1,size:"2rem",name:"audiotrack",class:a(["cursor-pointer",e.customClass])},null,8,["class"])):r("",!0),i.previewMode==="pdf"?(n(),o(u,{key:2,size:"100px",name:"picture_as_pdf",class:a(["cursor-pointer",e.customClass])},null,8,["class"])):r("",!0),i.previewMode==="office/word"?(n(),o(u,{key:3,size:"100px",name:"description",class:a(["cursor-pointer",e.customClass])},null,8,["class"])):r("",!0),i.previewMode==="office/excel"?(n(),o(u,{key:4,size:"100px",name:"table_view",class:a(["cursor-pointer",e.customClass])},null,8,["class"])):r("",!0)],8,F),t.caption?(n(),f("div",k,h(t.caption),1)):r("",!0)],2)}const U=E(v,[["render",D]]);export{U as default};
